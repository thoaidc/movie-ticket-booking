# üìä H·ªá th·ªëng ƒë·∫∑t v√© xem phim - Ph√¢n T√≠ch v√† Thi·∫øt K·∫ø

---

## Th√†nh vi√™n

Nh√≥m 21:

| H·ªç v√† t√™n        | M√£ sinh vi√™n |
|------------------|--------------|
| Nguy·ªÖn Th·∫ø D≈©ng  | B21DCCN275   |
| Nguy·ªÖn ƒê·∫Øc Phong | B21DCCN587   |
| ƒê√†m C√¥ng Tho·∫°i   | B21DCCN695   |


---


## 1. üéØ  M√¥ T·∫£ B√†i To√°n v√† M√¥ h√¨nh nghi·ªáp v·ª•

> **B√†i to√°n:** H·ªá th·ªëng ƒë·∫∑t ph√≤ng kh√°ch s·∫°n tr·ª±c tuy·∫øn

_M√¥ t·∫£ nghi·ªáp v·ª•_

H·ªá th·ªëng ƒë·∫∑t v√© xem phim cho ph√©p kh√°ch h√†ng ch·ªçn phim, su·∫•t chi·∫øu, gh·∫ø ng·ªìi v√† ti·∫øn h√†nh ƒë·∫∑t v√© tr·ª±c tuy·∫øn.
Sau khi kh√°ch h√†ng ch·ªçn phim, h·ªá th·ªëng s·∫Ω ki·ªÉm tra t√¨nh tr·∫°ng ch·ªó ng·ªìi, x√°c minh th√¥ng tin v√©, v√† x·ª≠ l√Ω thanh to√°n. 
N·∫øu ƒë·∫∑t v√© th√†nh c√¥ng, h·ªá th·ªëng s·∫Ω g·ª≠i th√¥ng b√°o x√°c nh·∫≠n v√© ƒë√£ ƒë·∫∑t ƒë·∫øn email c·ªßa kh√°ch h√†ng.

---

## 2. üß© X√°c ƒë·ªãnh c√°c Microservice

_X√°c ƒë·ªãnh c√°c th·ª±c th·ªÉ_

**ƒê·ªëi t∆∞·ª£ng s·ª≠ d·ª•ng**
- Kh√°ch h√†ng c√° nh√¢n

**M·ª•c ti√™u ch√≠nh**
- Cho ph√©p kh√°ch h√†ng t√¨m ki·∫øm v√† ƒë·∫∑t v√© tr·ª±c tuy·∫øn
- T·ª± ƒë·ªông h√≥a quy tr√¨nh ƒë·∫∑t v√© v√† th√¥ng b√°o

**D·ªØ li·ªáu x·ª≠ l√Ω**
- Th√¥ng tin ng∆∞·ªùi d√πng
- Th√¥ng tin phim, v√©, ch·ªó ng·ªìi v√† tr·∫°ng th√°i ch·ªó ng·ªìi
- Th√¥ng tin thanh to√°n

_Thi·∫øt k·∫ø th·ª±c th·ªÉ_

![Entity Relationship Diagram](../docs/assets/entities.jpg)


_Thi·∫øt k·∫ø nh·ªØng d·ªãch v·ª•_

**ƒê·∫∑t v√© xem phim**

1. B·∫Øt ƒë·∫ßu quy tr√¨nh ƒë·∫∑t v√©: Kh√°ch h√†ng truy c·∫≠p h·ªá th·ªëng v√† b·∫Øt ƒë·∫ßu quy tr√¨nh ƒë·∫∑t v√© xem phim.

2. Ch·ªçn phim v√† su·∫•t chi·∫øu: Kh√°ch h√†ng ch·ªçn phim mu·ªën xem, c√πng v·ªõi su·∫•t chi·∫øu.

3. Ch·ªçn gh·∫ø ng·ªìi: Kh√°ch h√†ng ch·ªçn gh·∫ø ng·ªìi t·ª´ danh s√°ch c√°c gh·∫ø c√≤n tr·ªëng.

4. T·∫°o ƒë∆°n h√†ng v·ªõi tr·∫°ng th√°i ƒëang x·ª≠ l√Ω v√† x√°c minh th√¥ng tin phim, su·∫•t chi·∫øu v√† gh·∫ø ng·ªìi c√≤n tr·ªëng:
H·ªá th·ªëng ki·ªÉm tra t√¨nh tr·∫°ng gh·∫ø ng·ªìi ƒë√£ ƒë∆∞·ª£c ch·ªçn xem c√≤n tr·ªëng hay ƒë√£ c√≥ ng∆∞·ªùi ƒë·∫∑t.

5. N·∫øu kh√¥ng c√≤n gh·∫ø ng·ªìi, k·∫øt th√∫c quy tr√¨nh: N·∫øu gh·∫ø ƒë√£ ƒë∆∞·ª£c ƒë·∫∑t b·ªüi ng∆∞·ªùi kh√°c, h·ªá th·ªëng th√¥ng b√°o v√† d·ª´ng quy tr√¨nh.

6. Nh·∫≠p th√¥ng tin kh√°ch h√†ng: Kh√°ch h√†ng cung c·∫•p c√°c th√¥ng tin c√° nh√¢n nh∆∞ h·ªç t√™n, s·ªë ƒëi·ªán tho·∫°i v√† email.

7. X√°c minh th√¥ng kh√°ch h√†ng: H·ªá th·ªëng x√°c minh th√¥ng tin kh√°ch h√†ng v√† l∆∞u v√†o c∆° s·ªü d·ªØ li·ªáu.

8. Nh·∫≠p v√† th·ª±c hi·ªán thanh to√°n: Kh√°ch h√†ng ti·∫øn h√†nh thanh to√°n.

9. N·∫øu thanh to√°n th√†nh c√¥ng, c·∫≠p nh·∫≠t t√¨nh tr·∫°ng gh·∫ø ng·ªìi: H·ªá th·ªëng c·∫≠p nh·∫≠t t√¨nh tr·∫°ng gh·∫ø ƒë√£ ƒë∆∞·ª£c ƒë·∫∑t v√†o c∆° s·ªü d·ªØ li·ªáu.

10. X√°c nh·∫≠n ho√†n th√†nh ƒë∆°n h√†ng v√† g·ª≠i email th√¥ng b√°o cho kh√°ch h√†ng. N·∫øu x√°c nh·∫≠n th·∫•t b·∫°i th√¨ g·ª≠i y√™u c·∫ßu ho√†n ti·ªÅn v√† h·ªßy ƒë·∫∑t gh·∫ø.


## 3. üîÑ Giao ti·∫øp gi·ªØa c√°c d·ªãch v·ª•

### **C∆° ch·∫ø ch√≠nh**
![flow](../docs/assets/flow.jpg)


#### Service Candidates:

| **Service**                | **M√¥ t·∫£ ch·ª©c nƒÉng**                                               |
|----------------------------|-------------------------------------------------------------------|
| API Gateway                | ƒê·ªãnh tuy·∫øn request t·ª´ client ƒë·∫øn c√°c service ph√π h·ª£p              |
| Ticket Booking Service     | X·ª≠ l√Ω to√†n b·ªô quy tr√¨nh ƒë·∫∑t v√©, ƒëi·ªÅu ph·ªëi gi·ªØa c√°c service        |
| Movie Service              | Qu·∫£n l√Ω th√¥ng tin phim, su·∫•t chi·∫øu v√† danh s√°ch gh·∫ø               |
| Customer Service           | Qu·∫£n l√Ω th√¥ng tin kh√°ch h√†ng                                      |
| Payment Service            | X·ª≠ l√Ω thanh to√°n tr·ª±c tuy·∫øn                                       |
| Seat Availability Service  | Ki·ªÉm tra t√¨nh tr·∫°ng gh·∫ø tr·ªëng tr∆∞·ªõc khi ƒë·∫∑t v√©                    |
| Notification Service       | G·ª≠i th√¥ng b√°o x√°c nh·∫≠n ƒë·∫∑t v√© cho kh√°ch h√†ng qua email            |
| Discovery Service          | Cho ph√©p c√°c service ƒëƒÉng k√Ω v√† ph√°t hi·ªán nhau (service registry) |



#### Service Capabilities:

| **Service**               | **Ch·ª©c nƒÉng ch√≠nh**                                                                          |
|---------------------------|----------------------------------------------------------------------------------------------|
| API Gateway               | - ƒê·ªãnh tuy·∫øn request                                                                         |
| Ticket Booking Service    | - Ch·ªçn phim, su·∫•t chi·∫øu, gh·∫ø<br>- X√°c minh kh√°ch h√†ng<br>- G·ªçi thanh to√°n<br>- G·ª≠i th√¥ng b√°o |
| Movie Service             | - Qu·∫£n l√Ω th√¥ng tin r·∫°p, phim, ph√≤ng chi·∫øu, su·∫•t chi·∫øu, danh s√°ch gh·∫ø c·ªßa ph√≤ng              |
| Customer Service          | - Qu·∫£n l√Ω th√¥ng tin kh√°ch h√†ng<br>- X√°c minh th√¥ng tin khi ƒë·∫∑t v√©                            |
| Payment Service           | - X·ª≠ l√Ω y√™u c·∫ßu thanh to√°n                                                                   |
| Seat Availability Service | - Ki·ªÉm tra v√† x√°c minh t√¨nh tr·∫°ng gh·∫ø tr·ªëng trong su·∫•t chi·∫øu c·ª• th·ªÉ                          |
| Notification Service      | - Nh·∫≠n message t·ª´ h√†ng ƒë·ª£i<br>- G·ª≠i email th√¥ng b√°o x√°c nh·∫≠n                                 |
| Discovery Service         | - ƒêƒÉng k√Ω service<br>- Ph√°t hi·ªán service kh√°c (Eureka registry)                              |



#### Interactions:

| **K·∫øt n·ªëi**                                        | **Protocol** | **M·ª•c ƒë√≠ch**                                                                       |
|----------------------------------------------------|--------------|------------------------------------------------------------------------------------|
| Client ‚Üî API Gateway                               | HTTP/REST    | T·∫•t c·∫£ request t·ª´ client                                                           |
| API Gateway ‚Üî Ticket Booking Service               | HTTP/REST    | ƒê·ªãnh tuy·∫øn y√™u c·∫ßu ƒë·∫∑t v√©                                                          |
| API Gateway ‚Üî Movie Service                        | HTTP/REST    | L·∫•y th√¥ng tin phim, su·∫•t chi·∫øu, gh·∫ø                                                |
| API Gateway ‚Üî Seat availability Service            | HTTP/REST    | L·∫•y th√¥ng tin t√¨nh tr·∫°ng gh·∫ø ng·ªìi c·ªßa su·∫•t chi·∫øu                                   |
| Ticket Booking Service ‚Üî Movie Service             | RabbitMQ     | L·∫•y th√¥ng tin phim, r·∫°p, su·∫•t chi·∫øu, danh s√°ch gh·∫ø                                 |
| Seat Availability Service ‚Üî Movie Service          | HTTP/REST    | L·∫•y th√¥ng tin gh·∫ø ng·ªìi v√† kh·ªüi t·∫°o tr·∫°ng th√°i                                      |
| Ticket Booking Service ‚Üî Seat Availability Service | RabbitMQ     | Ki·ªÉm tra gh·∫ø tr·ªëng tr∆∞·ªõc khi ƒë·∫∑t, gi·ªØ ho·∫∑c b·ªè gi·ªØ gh·∫ø, x√°c nh·∫≠n t√¨nh tr·∫°ng ƒë·∫∑t gh·∫ø |
| Ticket Booking Service ‚Üî Payment Service           | RabbitMQ     | G·ª≠i y√™u c·∫ßu thanh to√°n                                                             |
| Ticket Booking Service ‚Üî Customer Service          | RabbitMQ     | X√°c minh/ghi nh·∫≠n th√¥ng tin kh√°ch h√†ng                                             |
| Ticket Booking Service ‚Üî Customer Service          | HTTP/REST    | L·∫•y th√¥ng tin kh√°ch h√†ng                                                           |
| Ticket Booking Service ‚Üî Notification Service      | RabbitMQ     | G·ª≠i th√¥ng b√°o kh√¥ng ƒë·ªìng b·ªô sau khi ƒë·∫∑t v√©                                         |
| Notification Service ‚Üî Customer Service            | HTTP/REST    | L·∫•y th√¥ng tin kh√°ch h√†ng                                                           |
| C√°c Services ‚Üî Discovery Service                   | Eureka       | ƒêƒÉng k√Ω & ph√°t hi·ªán service                                                        |



#### Data Ownership:

| **Service**                  | **D·ªØ li·ªáu s·ªü h·ªØu**                                                               |
|------------------------------|----------------------------------------------------------------------------------|
| Movie Service                | - Danh s√°ch phim, r·∫°p, su·∫•t chi·∫øu, ph√≤ng chi·∫øu, danh s√°ch gh·∫ø                    |
| Customer Service             | - Th√¥ng tin kh√°ch h√†ng                                                           |
| Payment Service              | - Giao d·ªãch thanh to√°n                                                           |
| Ticket Booking Service       | - Th√¥ng tin ƒë∆°n ƒë·∫∑t v√© t·∫°m th·ªùi<br>- Li√™n k·∫øt kh√°ch h√†ng ‚Äì gh·∫ø ‚Äì phim - payment  |
| Seat Availability Service    | - Tr·∫°ng th√°i gh·∫ø theo su·∫•t chi·∫øu                                                 |
| Notification Service         | - Nh·∫≠t k√Ω g·ª≠i th√¥ng b√°o                                                          |

